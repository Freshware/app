<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title></title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width">
        <link rel="stylesheet" type="text/css" href="../js/jquery-ui-1.12.1/jquery-ui.min.css" />
        <link rel="stylesheet" type="text/css" href="../libraries/bootstrap-3.3.7-dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="../libraries/remodaljs/remodal.css">
		<link rel="stylesheet" href="../libraries/remodaljs/remodal-default-theme.css">
        <link rel="stylesheet" type="text/css" href="../css/app.css" />
	</head>
	<body id="body">
		<div class="container-fluid main-container height100">
			<div class="whiteSpace text-center">
				<a href="../index.html">
					<img src="../img/common/logo.png" alt="Krion" class="logo-sup">
				</a>
			</div>
			<div class="menu-link height100">
				<button class="c-hamburger c-hamburger--htx">
					<span>toggle menu</span>
				</button>
			</div>

			<div class="row krion height100">
				<div class="col-xs-12 text-center info-side">
					<h2>Selecciona un sector<br>para ver más información</h2>
					<div class="col-xs-6 col-xs-offset-3 separator"></div>
				</div>
				<div class="col-xs-12 info-side">
					<div class="row">
						<div class="col-xs-3">
							<a data-remodal-target="modal">
								<div class="col-xs-10 col-xs-offset-1 text-center">
									<img src="../img/1-krion/1-2/pics/16038437_xl.jpg" alt="Costablanca" class="img-circle">
									<div class="row">
										<div class="col-xs-12">
											<p>
												<span class="glyphicon glyphicon-home" aria-hidden="true"></span> Vivienda
											</p>
										</div>
									</div>
								</div>
							</a>
						</div>
						<div class="col-xs-3">
							<a data-remodal-target="modal">
								<div class="col-xs-10 col-xs-offset-1 text-center">
									<img src="../img/1-krion/1-2/pics/8831.jpg" alt="Costablanca" class="img-circle">
									<div class="row">
										<div class="col-xs-12">
											<p>
												<span class="glyphicon glyphicon-home" aria-hidden="true"></span> Vivienda
											</p>
										</div>
									</div>
								</div>
							</a>
						</div>
						<div class="col-xs-3">
							<a data-remodal-target="modal">
								<div class="col-xs-10 col-xs-offset-1 text-center">
									<img src="../img/1-krion/1-2/pics/A6580808.jpg" alt="Costablanca" class="img-circle">
									<div class="row">
										<div class="col-xs-12">
											<p>
												<span class="glyphicon glyphicon-home" aria-hidden="true"></span> Vivienda
											</p>
										</div>
									</div>
								</div>
							</a>
						</div>
						<div class="col-xs-3">
							<a data-remodal-target="modal">
								<div class="col-xs-10 col-xs-offset-1 text-center">
									<img src="../img/1-krion/1-2/pics/A6580836.jpg" alt="Costablanca" class="img-circle">
									<div class="row">
										<div class="col-xs-12">
											<p>
												<span class="glyphicon glyphicon-home" aria-hidden="true"></span> Vivienda
											</p>
										</div>
									</div>
								</div>
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-xs-3">
							<a data-remodal-target="modal">
								<div class="col-xs-10 col-xs-offset-1 text-center">
									<img src="../img/1-krion/1-2/pics/A6580875.jpg" alt="Costablanca" class="img-circle">
									<div class="row">
										<div class="col-xs-12">
											<p>
												<span class="glyphicon glyphicon-home" aria-hidden="true"></span> Vivienda
											</p>
										</div>
									</div>
								</div>
							</a>
						</div>
						<div class="col-xs-3">
							<a data-remodal-target="modal">
								<div class="col-xs-10 col-xs-offset-1 text-center">
									<img src="../img/1-krion/1-2/pics/A6580880.jpg" alt="Costablanca" class="img-circle">
									<div class="row">
										<div class="col-xs-12">
											<p>
												<span class="glyphicon glyphicon-home" aria-hidden="true"></span> Vivienda
											</p>
										</div>
									</div>
								</div>
							</a>
						</div>
						<div class="col-xs-3">
							<a data-remodal-target="modal">
								<div class="col-xs-10 col-xs-offset-1 text-center">
									<img src="../img/1-krion/1-2/pics/A_4503084.jpg" alt="Costablanca" class="img-circle">
									<div class="row">
										<div class="col-xs-12">
											<p>
												<span class="glyphicon glyphicon-home" aria-hidden="true"></span> Vivienda
											</p>
										</div>
									</div>
								</div>
							</a>
						</div>
						<div class="col-xs-3">
							<a data-remodal-target="modal">
								<div class="col-xs-10 col-xs-offset-1 text-center">
									<img src="../img/1-krion/1-2/pics/A_4503954.jpg" alt="Costablanca" class="img-circle">
									<div class="row">
										<div class="col-xs-12">
											<p>
												<span class="glyphicon glyphicon-home" aria-hidden="true"></span> Vivienda
											</p>
										</div>
									</div>
								</div>
							</a>
						</div>
					</div>
				</div>
			</div>

		<!-- Modals -->
		<div class="modal fade" id="completeImgModal" tabindex="-1" role="dialog" aria-labelledby="completeImgModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-body">
						<h4>
							Esta aplicación contiene más imágenes de las que descargadas por defecto en la instalación básica de la misma.<br>Si las desea puede descargarlas haciendo click en el botón descargar.
						</h4>
						<button class="btn btn-lg btn-success" id="startMainDownload">
							Descargar
						</button>
					</div>
				</div>
			</div>
		</div>

		<div class="remodal fresh-remodal" data-remodal-id="modal">
			<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Optio ullam placeat voluptatem harum quasi! Reprehenderit fugit dolor cum accusamus eveniet ratione enim numquam necessitatibus, dolore sit esse debitis? Mollitia, odio.</p>
		</div>
		<!-- Fin Modals -->

		<script src="../js/jquery-3.1.1.min.js"></script>
		<script src="../js/jquery-ui-1.12.1/jquery-ui.min.js"></script>
		<script src="../libraries/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
		<script src="../libraries/remodaljs/remodal.js"></script>
		<script src="../libraries/TouchSwipe-Jquery-Plugin-master/jquery.touchSwipe.min.js"></script>
		<script src="../cordova.js"></script>
		<script src="../js/app.js"></script>
		<script type="text/javascript">
			$(function() {
				$('.contenedor-info-item').swipe({
					// Manipulador genérico para todas las direcciones
					swipe:function(event, direction, distance, duration, fingerCount, fingerData) {
						if (direction == 'right' || direction == 'left')
						{
							moveSlides($(this), direction);
						}
					}
				});

				// Establecemos opciones más tarde
				$('.contenedor-info-item').swipe({
					fingers:1
				});
			});

$(document).on('opening', '.remodal', function () {
  console.log('Modal is opening');
});

			// A los bullets de abajo les indicamos
			// su función
			$('.menu-link-anchor').on('click', function(e) {
				e.preventDefault();
				moveSlides($(this), null);
			});

			// Función para mover los Slides
			function moveSlides(element, direction)
			{
				// Esta variable hace que la animación sea
				// desde izquierda o desde derecha. Por defecto "-1"
				// que es desde derecha.
				var dir = -1;
				
				// En caso de que sea un swipe left
				if (direction == 'left')
				{
					// Si es el primer elemento no hacemos nada y finalizamos
					if ($('.contenedor-info').children().length < element.data('target'))
					{
						return false;
					}

					dir = 1;
					num = element.data('target') + 1;

					// Obtenemos la verdadera sección a animar
					element = $('.contenedor-info').find("[data-target='" + num + "']");
				}
				else if (direction == 'right')
				{
					// Si es el último elemento no hacemos nada y finalizamos
					if (1 > element.data('target'))
					{
						return false;
					}

					num = element.data('target') - 1;

					// Obtenemos la verdadera sección a animar
					element = $('.contenedor-info').find("[data-target='" + num + "']");
				}

				// active es la sección activa
				// target es el número que la identifica
				// section es la nueva sección que se quiere mostrar
				// position es la posición en que se quiere colocar la nueva sección
				var active = $('.contenedor-info-item-active');
				var target = element.data('target');
				var section = element;

				if (element.hasClass('menu-link-anchor'))
				{
					section = $('.contenedor-info').find("[data-target='" + target + "']");
				}

				var position = section.width() * dir - 80;

				console.log(active)
				console.log(target)
				console.log(section)
				console.log(position)
				
				// Con este if, evitamos que se ejecute la animación
				// para la sección que ya está visitible
				if (! section.hasClass('contenedor-info-item-active'))
				{
					// Modificamos la altura de las capas
					// para que la nueva esté arriba
					active.css('z-index', 1);
					section.css('z-index', 2);

					// Realizamos la animación hasta la "posición"
					section.animate({
						// Primero lo colocamos en la posición desde la que nos interesa que inicie la animación
						// la sección que debe aparecer. Cambiamos la posición con una animación porque no responde
						// de otra forma
						left: position
					}, {
						duration: 1, // Le damos de tiempo 1 ms porque queremos el cambio inmediato
						complete: function() {
							// Al colocar la sección donde queremos, emepzamos la animación a mostrar
							section.animate({
								left: 0
							}, {
								duration: 1000,
								easing: 'easeOutExpo',
								start: function() {
									// Al empezar la animaicón hacemos que los links 
									// no tengan ninguna función para que no haya
									// un mal funcionamiento
									$('.menu-link-anchor').off('click');
								},
								complete: function() {
									// Al finalizar la animación
									
									// Hacemos aparecer el texto
									section.find('.info-content').fadeIn('fast');

									// Para no liarnos, les cambiamos el nombre a las variables
									// "active" será "old_active" y "section" será "new_active"
									var old_active = active;
									var new_active = section;

									// Cambiamos la clase que identifica a la
									// sección activa
									old_active.removeClass('contenedor-info-item-active');
									new_active.addClass('contenedor-info-item-active');

									// Hacemos que todas las secciones tengan
									// la misma altura, excepto la activa que
									// que estará por encima
									$('.contenedor-info-item').each(function() {
										$(this).css('z-index', 0);

										if ($(this).hasClass('contenedor-info-item-active'))
										{
											$(this).css('z-index', 1);
										}
										else
										{
											$(this).find('.info-content').fadeOut('fast');
										}
									});

									// Volvemos a darles la función a los
									// bullets de la izquierda
									$('.menu-link-anchor').on('click', function(e) {
										e.preventDefault();
										moveSlides($(this), null);
									});
								}
							});
						}
					});
				}
			}
		</script>
	</body>
</html>
